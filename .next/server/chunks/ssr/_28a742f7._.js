module.exports=[29171,a=>{"use strict";var b=a.i(7997),c=a.i(82248);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},11070,a=>{"use strict";let b=(0,a.i(1269).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>b],11070)},89584,a=>{"use strict";let b=(0,a.i(1269).default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);a.s(["Home",()=>b],89584)},75403,a=>{"use strict";var b=a.i(7997),c=a.i(37936),d=a.i(98310);a.i(70396);var e=a.i(73727),f=a.i(43917),g=a.i(29171),h=a.i(46840),i=a.i(89584),j=a.i(11070),k=a.i(95936);let l=async function(){let a=await (0,d.createClient)();await a.auth.signOut(),(0,e.redirect)("/")};async function m(){let a=await (0,d.createClient)(),c=null;try{let{data:b,error:d}=await a.auth.getUser();d&&(console.error("[v0] Auth error:",d.message),d.message.includes("User from sub claim in JWT does not exist")&&await a.auth.signOut(),(0,e.redirect)("/auth/login")),c=b.user}catch(a){console.error("[v0] Failed to get user:",a),(0,e.redirect)("/auth/login")}c||(0,e.redirect)("/auth/login");let{data:m}=await a.from("profiles").select("*").eq("id",c.id).single();if(!m){console.log("[v0] Profile not found, creating one for user:",c.id);let{data:b,error:d}=await a.from("profiles").insert({id:c.id,email:c.email||"",full_name:c.user_metadata?.full_name||"",role:c.user_metadata?.role||"seller"}).select().single();d&&(console.error("[v0] Error creating profile:",d),(0,e.redirect)("/auth/login")),m=b}let n={properties:0,revenue:0};if(["seller","blocker","landlord"].includes(m.role)){let{count:b}=await a.from("properties").select("*",{count:"exact",head:!0}).eq("landlord_id",c.id);n.properties=b||0}else if("admin"===m.role){let{count:b}=await a.from("properties").select("*",{count:"exact",head:!0});n.properties=b||0}return(0,b.jsxs)("div",{className:"flex min-h-svh flex-col",children:[(0,b.jsx)("header",{className:"border-b",children:(0,b.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Building2,{className:"h-6 w-6"}),(0,b.jsx)("span",{className:"text-xl font-semibold",children:"PropertyHub"})]}),(0,b.jsxs)("nav",{className:"flex items-center gap-4",children:[(0,b.jsx)(k.default,{href:"/browse",children:(0,b.jsx)(f.Button,{variant:"ghost",children:"Browse"})}),["seller","blocker","landlord"].includes(m.role)&&(0,b.jsx)(k.default,{href:"/dashboard/properties",children:(0,b.jsx)(f.Button,{variant:"ghost",children:"My Properties"})}),"admin"===m.role&&(0,b.jsx)(k.default,{href:"/admin",children:(0,b.jsx)(f.Button,{variant:"ghost",children:"Admin Panel"})}),(0,b.jsx)(k.default,{href:"/dashboard/payments",children:(0,b.jsx)(f.Button,{variant:"ghost",children:"Payments"})}),(0,b.jsx)("form",{action:l,children:(0,b.jsx)(f.Button,{variant:"ghost",type:"submit",children:"Logout"})})]})]})}),(0,b.jsx)("main",{className:"flex-1",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold",children:["Welcome back, ",m.full_name||"User","!"]}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["admin"===m.role&&"Manage properties and users","seller"===m.role&&"Manage your property listings","blocker"===m.role&&"Manage your property listings","landlord"===m.role&&"Manage your rental properties"]})]}),["seller","blocker","landlord","admin"].includes(m.role)&&(0,b.jsxs)("div",{className:"mb-8 grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Total Properties"}),(0,b.jsx)(i.Home,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:n.properties})})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,b.jsx)(g.CardTitle,{className:"text-sm font-medium",children:"Monthly Revenue"}),(0,b.jsx)(j.DollarSign,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(g.CardContent,{children:(0,b.jsxs)("div",{className:"text-2xl font-bold",children:["$",n.revenue.toLocaleString()]})})]})]}),(0,b.jsxs)(g.Card,{children:[(0,b.jsxs)(g.CardHeader,{children:[(0,b.jsx)(g.CardTitle,{children:"Quick Actions"}),(0,b.jsx)(g.CardDescription,{children:"Get started with common tasks"})]}),(0,b.jsxs)(g.CardContent,{className:"flex flex-wrap gap-4",children:[["seller","blocker","landlord"].includes(m.role)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.default,{href:"/dashboard/properties/new",children:(0,b.jsx)(f.Button,{children:"Add New Property"})}),(0,b.jsx)(k.default,{href:"/dashboard/properties",children:(0,b.jsx)(f.Button,{variant:"outline",children:"View My Properties"})}),(0,b.jsx)(k.default,{href:"/dashboard/payments",children:(0,b.jsx)(f.Button,{variant:"outline",children:"View Payments"})})]}),"admin"===m.role&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.default,{href:"/admin",children:(0,b.jsx)(f.Button,{children:"Admin Dashboard"})}),(0,b.jsx)(k.default,{href:"/admin/properties",children:(0,b.jsx)(f.Button,{variant:"outline",children:"Review Properties"})}),(0,b.jsx)(k.default,{href:"/admin/users",children:(0,b.jsx)(f.Button,{variant:"outline",children:"Manage Users"})})]})]})]})]})})]})}(0,c.registerServerReference)(l,"00d628593ab41c0033526fedcef4de4a984af0a52b",null),a.s(["$$RSC_SERVER_ACTION_0",0,l,"default",()=>m])},44469,a=>{"use strict";var b=a.i(75403);a.s([],6),a.i(6),a.s(["00d628593ab41c0033526fedcef4de4a984af0a52b",()=>b.$$RSC_SERVER_ACTION_0],44469)}];

//# sourceMappingURL=_28a742f7._.js.map