{"version":3,"sources":["turbopack:///[project]/components/payment-form.tsx/__nextjs-internal-proxy.mjs","turbopack:///[project]/app/dashboard/payments/new/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PaymentForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call PaymentForm() from the server but PaymentForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/payment-form.tsx\",\n    \"PaymentForm\",\n);\n","import { createClient } from \"@/lib/supabase/server\"\nimport { redirect } from \"next/navigation\"\nimport { PaymentForm } from \"@/components/payment-form\"\nimport { Building2 } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { Button } from \"@/components/ui/button\"\n\nexport default async function NewPaymentPage() {\n  const supabase = await createClient()\n\n  const {\n    data: { user },\n  } = await supabase.auth.getUser()\n\n  if (!user) {\n    redirect(\"/auth/login\")\n  }\n\n  const { data: profile } = await supabase.from(\"profiles\").select(\"*\").eq(\"id\", user.id).single()\n\n  if (!profile || (profile.role !== \"landlord\" && profile.role !== \"blocker\")) {\n    redirect(\"/dashboard\")\n  }\n\n  // Get landlord's properties\n  const { data: properties } = await supabase\n    .from(\"properties\")\n    .select(\"id, title, address, monthly_rent, currency\")\n    .eq(\"landlord_id\", user.id)\n\n  const propertyIds = properties?.map((p) => p.id) || []\n\n  // Get tenants for landlord's properties\n  const { data: tenants } = await supabase\n    .from(\"tenants\")\n    .select(\n      `\n      id,\n      monthly_rent,\n      properties!tenants_property_id_fkey(title, address),\n      profiles!tenants_renter_id_fkey(full_name, email)\n    `,\n    )\n    .in(\"property_id\", propertyIds.length > 0 ? propertyIds : [\"\"])\n    .eq(\"status\", \"active\")\n\n  return (\n    <div className=\"flex min-h-svh flex-col\">\n      {/* Header */}\n      <header className=\"border-b\">\n        <div className=\"container mx-auto flex h-16 items-center justify-between px-4\">\n          <div className=\"flex items-center gap-2\">\n            <Building2 className=\"h-6 w-6\" />\n            <span className=\"text-xl font-semibold\">PropertyHub</span>\n          </div>\n          <nav className=\"flex items-center gap-4\">\n            <Link href=\"/dashboard\">\n              <Button variant=\"ghost\">Dashboard</Button>\n            </Link>\n            <Link href=\"/dashboard/payments\">\n              <Button variant=\"ghost\">Payments</Button>\n            </Link>\n          </nav>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"flex-1\">\n        <div className=\"container mx-auto max-w-3xl px-4 py-8\">\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold\">Add Payment Record</h1>\n            <p className=\"text-muted-foreground\">Create a new rent payment record</p>\n          </div>\n\n          <PaymentForm tenants={tenants || []} />\n        </div>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"qUAEO,IAAM,EAAc,CAAA,EAAA,AAD3B,EAAA,CAAA,CAAA,OAC2B,uBAAA,AAAuB,EAC9C,WAAa,MAAM,AAAI,MAAM,oOAAsO,EACnQ,4DACA,gEAHG,IAAM,EAAc,CAAA,EAD3B,AAC2B,EAD3B,CAAA,CAAA,OAC2B,uBAAA,AAAuB,EAC9C,WAAa,MAAM,AAAI,MAAM,oOAAsO,EACnQ,wCACA,yICLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,eAAe,IAC5B,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAE7B,CACJ,KAAM,MAAE,CAAI,CAAE,CACf,CAAG,MAAM,EAAS,IAAI,CAAC,OAAO,EAE3B,CAAC,GACH,CAAA,EADS,AACT,EAAA,QAAA,AAAQ,EAAC,eAGX,GAAM,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,KAAM,EAAK,EAAE,EAAE,MAAM,EAE1F,CAAC,IAA6B,aAAjB,EAAQ,IAAI,EAAmB,AAAiB,cAAT,IAAI,AAAK,GAAY,AAC3E,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,cAIX,GAAM,CAAE,KAAM,CAAU,CAAE,CAAG,MAAM,EAChC,IAAI,CAAC,cACL,MAAM,CAAC,8CACP,EAAE,CAAC,cAAe,EAAK,EAAE,EAEtB,EAAc,GAAY,IAAI,AAAC,GAAM,EAAE,EAAE,GAAK,EAAE,CAGhD,CAAE,KAAM,CAAO,CAAE,CAAG,MAAM,EAC7B,IAAI,CAAC,WACL,MAAM,CACL,CAAC;;;;;IAKH,CAAC,EAEA,EAAE,CAAC,cAAe,EAAY,MAAM,CAAG,EAAI,EAAc,CAAC,GAAG,EAC7D,EAAE,CAAC,SAAU,UAEhB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCAEb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,oBAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,YACrB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iCAAwB,mBAE1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,sBACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,iBAAQ,gBAE1B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,+BACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,iBAAQ,uBAOhC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,uBACnC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,wCAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,QAAS,GAAW,EAAE,UAK7C","ignoreList":[0]}