module.exports=[7370,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(69240),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(97895);function j({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,i.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}var k=a.i(87682),l=a.i(3130),m=a.i(70121),n=a.i(50104),o=a.i(7554),p=a.i(25152),q=a.i(77994),r=a.i(3688),s=a.i(72752),t=a=>{var b;let d,e,{present:f,children:g}=a,h=function(a){var b,d;let[e,f]=c.useState(),g=c.useRef({}),h=c.useRef(a),i=c.useRef("none"),[j,k]=(b=a?"mounted":"unmounted",d={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},c.useReducer((a,b)=>d[a][b]??a,b));return c.useEffect(()=>{let a=u(g.current);i.current="mounted"===j?a:"none"},[j]),(0,s.useLayoutEffect)(()=>{let b=g.current,c=h.current;if(c!==a){let d=i.current,e=u(b);a?k("MOUNT"):"none"===e||b?.display==="none"?k("UNMOUNT"):c&&d!==e?k("ANIMATION_OUT"):k("UNMOUNT"),h.current=a}},[a,k]),(0,s.useLayoutEffect)(()=>{if(e){let a,b=e.ownerDocument.defaultView??window,c=c=>{let d=u(g.current).includes(c.animationName);if(c.target===e&&d&&(k("ANIMATION_END"),!h.current)){let c=e.style.animationFillMode;e.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===e.style.animationFillMode&&(e.style.animationFillMode=c)})}},d=a=>{a.target===e&&(i.current=u(g.current))};return e.addEventListener("animationstart",d),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{b.clearTimeout(a),e.removeEventListener("animationstart",d),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}k("ANIMATION_END")},[e,k]),{isPresent:["mounted","unmountSuspended"].includes(j),ref:c.useCallback(a=>{a&&(g.current=getComputedStyle(a)),f(a)},[])}}(f),i="function"==typeof g?g({present:h.isPresent}):c.Children.only(g),j=(0,m.useComposedRefs)(h.ref,(b=i,(e=(d=Object.getOwnPropertyDescriptor(b.props,"ref")?.get)&&"isReactWarning"in d&&d.isReactWarning)?b.ref:(e=(d=Object.getOwnPropertyDescriptor(b,"ref")?.get)&&"isReactWarning"in d&&d.isReactWarning)?b.props.ref:b.props.ref||b.ref));return"function"==typeof g||h.isPresent?c.cloneElement(i,{ref:j}):null};function u(a){return a?.animationName||"none"}t.displayName="Presence";var v=a.i(30553),w="Checkbox",[x,y]=(0,n.createContextScope)(w),[z,A]=x(w),B=c.forwardRef((a,d)=>{let{__scopeCheckbox:e,name:f,checked:g,defaultChecked:h,required:i,disabled:j,value:k="on",onCheckedChange:l,form:n,...q}=a,[r,s]=c.useState(null),t=(0,m.useComposedRefs)(d,a=>s(a)),u=c.useRef(!1),w=!r||n||!!r.closest("form"),[x=!1,y]=(0,p.useControllableState)({prop:g,defaultProp:h,onChange:l}),A=c.useRef(x);return c.useEffect(()=>{let a=r?.form;if(a){let b=()=>y(A.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[r,y]),(0,b.jsxs)(z,{scope:e,state:x,disabled:j,children:[(0,b.jsx)(v.Primitive.button,{type:"button",role:"checkbox","aria-checked":F(x)?"mixed":x,"aria-required":i,"data-state":G(x),"data-disabled":j?"":void 0,disabled:j,value:k,...q,ref:t,onKeyDown:(0,o.composeEventHandlers)(a.onKeyDown,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,o.composeEventHandlers)(a.onClick,a=>{y(a=>!!F(a)||!a),w&&(u.current=a.isPropagationStopped(),u.current||a.stopPropagation())})}),w&&(0,b.jsx)(E,{control:r,bubbles:!u.current,name:f,value:k,checked:x,required:i,disabled:j,form:n,style:{transform:"translateX(-100%)"},defaultChecked:!F(h)&&h})]})});B.displayName=w;var C="CheckboxIndicator",D=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=A(C,d);return(0,b.jsx)(t,{present:e||F(g.state)||!0===g.state,children:(0,b.jsx)(v.Primitive.span,{"data-state":G(g.state),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});D.displayName=C;var E=a=>{let{control:d,checked:e,bubbles:f=!0,defaultChecked:g,...h}=a,i=c.useRef(null),j=(0,q.usePrevious)(e),k=(0,r.useSize)(d);c.useEffect(()=>{let a=i.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(j!==e&&b){let c=new Event("click",{bubbles:f});a.indeterminate=F(e),b.call(a,!F(e)&&e),a.dispatchEvent(c)}},[j,e,f]);let l=c.useRef(!F(e)&&e);return(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:g??l.current,...h,tabIndex:-1,ref:i,style:{...a.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function F(a){return"indeterminate"===a}function G(a){return F(a)?"indeterminate":a?"checked":"unchecked"}var H=a.i(6406);function I({className:a,...c}){return(0,b.jsx)(B,{"data-slot":"checkbox",className:(0,i.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(D,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,b.jsx)(H.CheckIcon,{className:"size-3.5"})})})}function J({userId:a,property:i}){let m=(0,d.useRouter)(),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)({title:i?.title||"",description:i?.description||"",property_type:i?.property_type||"house",listing_type:i?.listing_type||"rent",address:i?.address||"",city:i?.city||"",state:i?.state||"",zip_code:i?.zip_code||"",bedrooms:i?.bedrooms||1,bathrooms:i?.bathrooms||1,square_feet:i?.square_feet||"",rent_amount:i?.rent_amount||"",sale_price:i?.sale_price||"",deposit_amount:i?.deposit_amount||"",currency:i?.currency||"UGX",parking:i?.parking||!1,furnished:i?.furnished||!1,amenities:i?.amenities?.join(", ")||"",available_from:i?.available_from||""}),t="land"===r.property_type,u="sale"===r.listing_type,v=async b=>{b.preventDefault(),o(!0),q(null);let c=(0,e.createClient)();try{let b={landlord_id:a,title:r.title,description:r.description,property_type:r.property_type,listing_type:r.listing_type,address:r.address,city:r.city,state:r.state,zip_code:r.zip_code,bedrooms:t?null:Number(r.bedrooms),bathrooms:t?null:Number(r.bathrooms),square_feet:r.square_feet?Number(r.square_feet):null,rent_amount:u?null:Number(r.rent_amount),sale_price:u?Number(r.sale_price):null,deposit_amount:r.deposit_amount?Number(r.deposit_amount):null,currency:r.currency,parking:r.parking,furnished:r.furnished,amenities:r.amenities?r.amenities.split(",").map(a=>a.trim()).filter(a=>a):null,available_from:r.available_from||null,status:"pending"};if(i){let{error:a}=await c.from("properties").update(b).eq("id",i.id);if(a)throw a}else{let{error:a}=await c.from("properties").insert([b]);if(a)throw a}m.push("/dashboard/properties"),m.refresh()}catch(a){q(a instanceof Error?a.message:"An error occurred")}finally{o(!1)}};return(0,b.jsx)(l.Card,{children:(0,b.jsx)(l.CardContent,{className:"pt-6",children:(0,b.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"title",children:"Property Title"}),(0,b.jsx)(g.Input,{id:"title",placeholder:"Beautiful 2BR House or Prime Land for Sale",required:!0,value:r.title,onChange:a=>s({...r,title:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(j,{id:"description",placeholder:"Describe your property...",required:!0,rows:4,value:r.description,onChange:a=>s({...r,description:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"property_type",children:"Property Category"}),(0,b.jsxs)(k.Select,{value:r.property_type,onValueChange:a=>s({...r,property_type:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"house",children:"House"}),(0,b.jsx)(k.SelectItem,{value:"apartment",children:"Apartment"}),(0,b.jsx)(k.SelectItem,{value:"condo",children:"Condo"}),(0,b.jsx)(k.SelectItem,{value:"townhouse",children:"Townhouse"}),(0,b.jsx)(k.SelectItem,{value:"studio",children:"Studio"}),(0,b.jsx)(k.SelectItem,{value:"land",children:"Land"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"listing_type",children:"Listing Type"}),(0,b.jsxs)(k.Select,{value:r.listing_type,onValueChange:a=>s({...r,listing_type:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"rent",children:"For Rent"}),(0,b.jsx)(k.SelectItem,{value:"sale",children:"For Sale"})]})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"address",children:"Street Address"}),(0,b.jsx)(g.Input,{id:"address",placeholder:"123 Main St",required:!0,value:r.address,onChange:a=>s({...r,address:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"city",children:"City"}),(0,b.jsx)(g.Input,{id:"city",placeholder:"Kampala",required:!0,value:r.city,onChange:a=>s({...r,city:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"state",children:"State/Region"}),(0,b.jsx)(g.Input,{id:"state",placeholder:"Central",required:!0,value:r.state,onChange:a=>s({...r,state:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"zip_code",children:"Postal Code"}),(0,b.jsx)(g.Input,{id:"zip_code",placeholder:"00256",required:!0,value:r.zip_code,onChange:a=>s({...r,zip_code:a.target.value})})]})]}),!t&&(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"bedrooms",children:"Bedrooms"}),(0,b.jsx)(g.Input,{id:"bedrooms",type:"number",min:"0",required:!0,value:r.bedrooms,onChange:a=>s({...r,bedrooms:Number(a.target.value)})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"bathrooms",children:"Bathrooms"}),(0,b.jsx)(g.Input,{id:"bathrooms",type:"number",min:"0",step:"0.5",required:!0,value:r.bathrooms,onChange:a=>s({...r,bathrooms:Number(a.target.value)})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"square_feet",children:"Square Feet"}),(0,b.jsx)(g.Input,{id:"square_feet",type:"number",min:"0",placeholder:"Optional",value:r.square_feet,onChange:a=>s({...r,square_feet:a.target.value})})]})]}),t&&(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"square_feet",children:"Land Size (Square Feet)"}),(0,b.jsx)(g.Input,{id:"square_feet",type:"number",min:"0",placeholder:"Enter land size",value:r.square_feet,onChange:a=>s({...r,square_feet:a.target.value})})]}),u?(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"sale_price",children:"Sale Price"}),(0,b.jsx)(g.Input,{id:"sale_price",type:"number",min:"0",step:"0.01",required:!0,value:r.sale_price,onChange:a=>s({...r,sale_price:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"currency",children:"Currency"}),(0,b.jsxs)(k.Select,{value:r.currency,onValueChange:a=>s({...r,currency:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"UGX",children:"UGX (Ugandan Shillings)"}),(0,b.jsx)(k.SelectItem,{value:"USD",children:"USD (US Dollars)"})]})]})]})]}):(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"rent_amount",children:"Monthly Rent"}),(0,b.jsx)(g.Input,{id:"rent_amount",type:"number",min:"0",step:"0.01",required:!0,value:r.rent_amount,onChange:a=>s({...r,rent_amount:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"deposit_amount",children:"Security Deposit"}),(0,b.jsx)(g.Input,{id:"deposit_amount",type:"number",min:"0",step:"0.01",placeholder:"Optional",value:r.deposit_amount,onChange:a=>s({...r,deposit_amount:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"currency",children:"Currency"}),(0,b.jsxs)(k.Select,{value:r.currency,onValueChange:a=>s({...r,currency:a}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"UGX",children:"UGX (Ugandan Shillings)"}),(0,b.jsx)(k.SelectItem,{value:"USD",children:"USD (US Dollars)"})]})]})]})]}),!t&&(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsx)(h.Label,{children:"Amenities"}),(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(I,{id:"parking",checked:r.parking,onCheckedChange:a=>s({...r,parking:a})}),(0,b.jsx)(h.Label,{htmlFor:"parking",className:"font-normal cursor-pointer",children:"Parking Available"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(I,{id:"furnished",checked:r.furnished,onCheckedChange:a=>s({...r,furnished:a})}),(0,b.jsx)(h.Label,{htmlFor:"furnished",className:"font-normal cursor-pointer",children:"Furnished"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"amenities",children:"Additional Amenities (comma-separated)"}),(0,b.jsx)(g.Input,{id:"amenities",placeholder:"Pool, Gym, Security, Garden",value:r.amenities,onChange:a=>s({...r,amenities:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(h.Label,{htmlFor:"available_from",children:"Available From"}),(0,b.jsx)(g.Input,{id:"available_from",type:"date",value:r.available_from,onChange:a=>s({...r,available_from:a.target.value})})]})]}),p&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:p}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(f.Button,{type:"submit",disabled:n,className:"flex-1",children:n?"Saving...":i?"Update Property":"Create Property"}),(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>m.back(),children:"Cancel"})]})]})})})}a.s(["PropertyForm",()=>J],7370)}];

//# sourceMappingURL=components_property-form_tsx_b2f88baf._.js.map